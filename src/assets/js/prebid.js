(()=>{"use strict";function e(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}const t=1,n={AUCTION_INIT:"auctionInit",AUCTION_TIMEOUT:"auctionTimeout",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",SEAT_NON_BID:"seatNonBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",BILLABLE_EVENT:"billableEvent",BID_ACCEPTED:"bidAccepted",RUN_PAAPI_AUCTION:"paapiRunAuction",PBS_ANALYTICS:"pbsAnalytics",PAAPI_BID:"paapiBid",PAAPI_NO_BID:"paapiNoBid",PAAPI_ERROR:"paapiError"},r="TRUE"===((i=window.location.search,i?i.replace(/^\?/,"").split("&").reduce(((e,t)=>{let[n,r]=t.split("=");return/\[\]$/.test(n)?(n=n.replace("[]",""),e[n]=e[n]||[],e[n].push(r)):e[n]=r||"",e}),{}):{}).pbjs_debug||"").toUpperCase();var i;const o={},s="random",c={};c[s]=!0,c.fixed=!0;const d=s,a={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"};function u(e){const t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?{}:{priceGranularity:a.MEDIUM,customPriceBucket:{},mediaTypePriceGranularity:{},bidderSequence:d,auctionOptions:{}};function n(e){return t[e]}function r(n,r){t.hasOwnProperty(n)||Object.defineProperty(e,n,{enumerable:!0}),t[n]=r}const i={publisherDomain:{set(e){null!=e&&j("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),r("publisherDomain",e)}},priceGranularity:{set(e){s(e)&&("string"==typeof e?r("priceGranularity",o(e)?e:a.MEDIUM):U(e)&&(r("customPriceBucket",e),r("priceGranularity",a.CUSTOM),v("Using custom price granularity")))}},customPriceBucket:{},mediaTypePriceGranularity:{set(e){null!=e&&r("mediaTypePriceGranularity",Object.keys(e).reduce(((t,r)=>(s(e[r])?"string"==typeof e?t[r]=o(e[r])?e[r]:n("priceGranularity"):U(e)&&(t[r]=e[r],v(`Using custom price granularity for ${r}`)):j(`Invalid price granularity for media type: ${r}`),t)),{}))}},bidderSequence:{set(e){c[e]?r("bidderSequence",e):j(`Invalid order: ${e}. Bidder Sequence was not set.`)}},auctionOptions:{set(e){(function(e){if(!U(e))return j("Auction Options must be an object"),!1;for(let t of Object.keys(e)){if("secondaryBidders"!==t&&"suppressStaleRender"!==t)return j(`Auction Options given an incorrect param: ${t}`),!1;if("secondaryBidders"===t){if(!T(e[t]))return j(`Auction Options ${t} must be of type Array`),!1;if(!e[t].every(k))return j(`Auction Options ${t} must be only string`),!1}else if("suppressStaleRender"===t&&!C(e[t],y))return j(`Auction Options ${t} must be of type boolean`),!1}return!0})(e)&&r("auctionOptions",e)}}};return Object.defineProperties(e,Object.fromEntries(Object.entries(i).map((e=>{let[i,o]=e;return[i,Object.assign({get:n.bind(null,i),set:r.bind(null,i),enumerable:t.hasOwnProperty(i),configurable:!t.hasOwnProperty(i)},o)]})))),e;function o(e){return n=t=>e===a[t],(t=Object.keys(a))&&t.find(n,undefined);var t,n}function s(e){if(!e)return D("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)o(e)||j("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if(U(e)&&!function(e){if(t=e,!(t&&(T(t)||k(t)?t.length>0:!(Object.keys(t).length<=0))&&e.buckets&&Array.isArray(e.buckets)))return!1;var t;let n=!0;return e.buckets.forEach((e=>{e.max&&e.increment||(n=!1)})),n}(e))return D("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}}const l=function(){let t,n,i,s=[],c=null;function d(){t={};let e=u({debug:r,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,disableAjaxTimeout:!1,maxNestedIframes:10,maxBid:5e3,userSync:{topics:o}});n&&h(Object.keys(n).reduce(((t,r)=>(n[r]!==e[r]&&(t[r]=e[r]||{}),t)),{})),n=e,i={}}function a(){if(c&&i&&U(i[c])){let e=i[c];return function(){return Array.from.apply(Array,arguments)}(new Set(Object.keys(n).concat(Object.keys(e)))).reduce(((t,r)=>(void 0===e[r]?t[r]=n[r]:void 0===n[r]?t[r]=e[r]:U(e[r])?t[r]=G({},n[r],e[r]):t[r]=e[r],t)),{})}return Object.assign({},n)}const[l,f]=[a,function(){const e=a();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((t=>function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){const n=arguments.length<=0?void 0:arguments[0];return n?e(t(),n):a()}return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;if("string"!=typeof e&&(r=e,e="*",n=t||{}),"function"!=typeof r)return void D("listener must be a function");const i={topic:e,callback:r};return s.push(i),n.init&&r("*"===e?f():{[e]:f(e)}),function(){s.splice(s.indexOf(i),1)}}(...arguments)})),[g,b]=[f,l].map((e=>function(){let t=e(...arguments);return t&&"object"==typeof t&&(t=S(t)),t}));function p(e){if(!U(e))return void D("setConfig options must be an object");let r=Object.keys(e),i={};r.forEach((r=>{let o=e[r];U(t[r])&&U(o)&&(o=Object.assign({},t[r],o));try{i[r]=n[r]=o}catch(e){j(`Cannot set config for property ${r} : `,e)}})),h(i)}function h(e){const t=Object.keys(e);s.filter((e=>{return n=t,r=e.topic,n&&n.includes(r,undefined)||!1;var n,r})).forEach((t=>{t.callback({[t.topic]:e[t.topic]})})),s.filter((e=>"*"===e.topic)).forEach((t=>t.callback(e)))}function y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{!function(e){if(!U(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!U(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((n=>{i[n]||(i[n]=u({},!1)),Object.keys(e.config).forEach((r=>{let o=e.config[r];const s=i[n][r];if(U(o)&&(null==s||U(s))){const e=t?G:Object.assign;i[n][r]=e({},s||{},o)}else i[n][r]=o}))}))}catch(e){D(e)}}function E(e,t){c=e;try{return t()}finally{m()}}function m(){c=null}return d(),{getCurrentBidder:function(){return c},resetBidder:m,getConfig:f,getAnyConfig:l,readConfig:g,readAnyConfig:b,setConfig:p,mergeConfig:function(e){if(!U(e))return void D("mergeConfig input must be an object");const t=G(a(),e);return p({...t}),t},setDefaults:function(e){U(t)?(Object.assign(t,e),Object.assign(n,e)):D("defaults must be an object")},resetConfig:d,runWithBidder:E,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return E(e,t.bind(this,...r))}j("config.callbackWithBidder callback is not a function")}}},setBidderConfig:y,getBidderConfig:function(){return i},mergeBidderConfig:function(e){return y(e,!0)}}}();function f(e){var t,n,r;if(Array.isArray(e)){for(n=Array(t=e.length);t--;)n[t]=(r=e[t])&&"object"==typeof r?f(r):r;return n}if("[object Object]"===Object.prototype.toString.call(e)){for(t in n={},e)"__proto__"===t?Object.defineProperty(n,t,{value:f(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=(r=e[t])&&"object"==typeof r?f(r):r;return n}return e}const g=window,b=g.pbjs=g.pbjs||{};b.cmd=b.cmd||[],b.que=b.que||[],g===window&&(g._pbjsGlobals=g._pbjsGlobals||[],g._pbjsGlobals.push("pbjs"));var p="String",h="Object",y="Boolean",E=Object.prototype.toString;let m,O=Boolean(window.console),A=Boolean(O&&window.console.log),B=(Boolean(O&&window.console.info),Boolean(O&&window.console.warn)),w=Boolean(O&&window.console.error);function R(){null!=m&&m(...arguments)}function v(){_()&&A&&console.log.apply(console,I(arguments,"MESSAGE:"))}function j(){_()&&B&&console.warn.apply(console,I(arguments,"WARNING:")),R(n.AUCTION_DEBUG,{type:"WARNING",arguments})}function D(){_()&&w&&console.error.apply(console,I(arguments,"ERROR:")),R(n.AUCTION_DEBUG,{type:"ERROR",arguments})}function I(e,t){e=[].slice.call(e);let n=l.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?`%c${n}`:"")),e;function r(e){return`display: inline-block; color: #fff; background: ${e}; padding: 1px 4px; border-radius: 3px;`}}function _(){return!!l.getConfig("debug")}function C(e,t){return E.call(e)==="[object "+t+"]"}function k(e){return C(e,p)}const T=Array.isArray.bind(Array);function U(e){return C(e,h)}function S(e){return f(e)||{}}function P(e,t){if(t<1)throw new Error(`numRequiredCalls must be a positive number. Got ${t}`);let n=0;return function(){n++,n===t&&e.apply(this,arguments)}}function N(e,t){let{checkTypes:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t||n&&e.constructor!==t.constructor)return!1;{const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let i of r){if(!t.hasOwnProperty(i))return!1;if(!N(e[i],t[i],{checkTypes:n}))return!1}return!0}}function G(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if(U(e)&&U(i))for(const t in i)U(i[t])?(e[t]||Object.assign(e,{[t]:{}}),G(e[t],i[t])):T(i[t])?e[t]?T(e[t])&&i[t].forEach((n=>{let r=1;for(let i=0;i<e[t].length;i++)if(N(e[t][i],n)){r=0;break}r&&e[t].push(n)})):Object.assign(e,{[t]:[...i[t]]}):Object.assign(e,{[t]:i[t]});return G(e,...n)}function $(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n in e){const r=e[n],i=typeof r;if(void 0===r||"function"===i||"symbol"===i||r instanceof RegExp||r instanceof Map||r instanceof Set||r instanceof Date||null!==r&&"object"===i&&r.hasOwnProperty("toJSON"))return!0;if(null!==r&&"object"===i&&r.constructor===Object){if(t.has(r))return!0;if(t.add(r),$(r,t))return!0}}return!1}function q(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};({setTimeout:this.setTimeout=window.setTimeout.bind(window)}=e),this.logger=e.logger,this.rules=[]}let x,M;function W(e,t){let{hook:n,logger:r}=t;x=K.bind({overrides:e,logger:r}),n.get("addBidResponse").before(x,5),M=z.bind({overrides:e,logger:r}),n.get("addBidderRequests").before(M,5)}function L(e){let{hook:t}=e;t.get("addBidResponse").getHooks({hook:x}).remove(),t.get("addBidderRequests").getHooks({hook:M}).remove()}function F(e,t,n){return!(!e.bidder||e.bidder===t)||!(!e.adUnitCode||e.adUnitCode===n)}function Y(e,t){return Array.isArray(e)&&-1===e.indexOf(t)}function H(e,t,n,r){return Object.keys(e).filter((e=>-1===["adUnitCode","bidder"].indexOf(e))).reduce((function(t,i){return r.logMessage(`bidder overrides changed '${t.adUnitCode}/${t.bidderCode}' ${n}.${i} from '${t[i]}.js' to '${e[i]}'`),t[i]=e[i],t.isDebug=!0,t}),t)}function K(e,t,n,r){const{overrides:i,logger:o}=this;Y(i.bidders,n.bidderCode)?o.logWarn(`bidder '${n.bidderCode}' excluded from auction by bidder overrides`):(Array.isArray(i.bids)&&i.bids.forEach((function(e){F(e,n.bidderCode,t)||H(e,n,"bidder",o)})),e(t,n,r))}function z(e,t){const{overrides:n,logger:r}=this,i=t.filter((function(e){return!Y(n.bidders,e.bidderCode)||(r.logWarn(`bidRequest '${e.bidderCode}' excluded from auction by bidder overrides`),!1)}));Array.isArray(n.bidRequests)&&i.forEach((function(e){n.bidRequests.forEach((function(t){e.bids.forEach((function(n){F(t,e.bidderCode,n.adUnitCode)||H(t,n,"bidRequest",r)}))}))})),e(i)}Number.isInteger.bind(Number),Object.assign(q.prototype,{DEFAULT_RULE_OPTIONS:{delay:0},serializeConfig(t){return t.filter(((t,n)=>{const r=!$(t);return r||e(t,"options.suppressWarnings")||this.logger.logWarn(`Bid interceptor rule definition #${n+1} contains non-serializable properties and will be lost after a refresh. Rule definition: `,t),r}))},updateConfig(e){this.rules=(e.intercept||[]).map(((e,t)=>this.rule(e,t+1)))},rule(e,t){return{no:t,match:this.matcher(e.when,t),replace:this.replacer(e.then,t),options:Object.assign({},this.DEFAULT_RULE_OPTIONS,e.options),paapi:this.paapiReplacer(e.paapi||[],t)}},matcher(e,t){if("function"==typeof e)return e;if("object"!=typeof e)return this.logger.logError(`Invalid 'when' definition for debug bid interceptor (in rule #${t})`),()=>!1;function n(t,r){let{ref:i=e,args:o=[]}=r;return Object.entries(i).map((e=>{let[r,i]=e;const s=t[r];return i instanceof RegExp?null!=i.exec(s):"function"==typeof i?!!i(s,...o):"object"==typeof i?n(s,{ref:i,args:o}):s===i})).every((e=>e))}return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n(e,{args:r})}},replacer(e,t){var n=this;if(null===e)return()=>null;let r;return"function"==typeof(e=e||{})?r=t=>{let{args:n}=t;return e(...n)}:"object"!=typeof e?(this.logger.logError(`Invalid 'then' definition for debug bid interceptor (in rule #${t})`),r=()=>({})):r=t=>{let{args:n,ref:i=e}=t;const o=Array.isArray(i)?[]:{};return Object.entries(i).forEach((e=>{let[t,i]=e;o[t]="function"==typeof i?i(...n):null!=i&&"object"==typeof i?r({args:n,ref:i}):i})),o},function(e){const t=n.responseDefaults(e);for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return G(t,r({args:[e,...o]})),t.hasOwnProperty("ad")||t.hasOwnProperty("adUrl")||(t.ad=n.defaultAd(e,t)),t.isDebug=!0,t}},paapiReplacer(e,t){function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Object.keys(e).some((e=>!["config","igb"].includes(e)))?{config:e}:e))}return Array.isArray(e)?()=>n(e):"function"==typeof e?function(){return n(e(...arguments))}:void this.logger.logError(`Invalid 'paapi' definition for debug bid interceptor (in rule #${t})`)},responseDefaults:e=>({requestId:e.bidId,cpm:3.5764,currency:"EUR",width:300,height:250,ttl:360,creativeId:"mock-creative-id",netRevenue:!1,meta:{}}),defaultAd:(e,t)=>`<html><head><style>#ad {width: ${t.width}px;height: ${t.height}px;background-color: #f6f6ae;color: #85144b;padding: 5px;text-align: center;display: flex;flex-direction: column;align-items: center;justify-content: center;}#bidder {font-family: monospace;font-weight: normal;}#title {font-size: x-large;font-weight: bold;margin-bottom: 5px;}#body {font-size: large;margin-top: 5px;}</style></head><body><div id="ad"><div id="title">Mock ad: <span id="bidder">${e.bidder}</span></div><div id="body">${t.width}x${t.height}</div></div></body></html>`,match(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.rules.find((t=>t.match(e,...n)))},matchAll(e,t){const[n,r]=[[],[]];return e.forEach((e=>{const i=this.match(e,t);null!=i?n.push({rule:i,bid:e}):r.push(e)})),[n,r]},intercept(e){let{bids:t,bidRequest:n,addBid:r,addPaapiConfig:i,done:o}=e;null==t&&(t=n.bids);const[s,c]=this.matchAll(t,n);if(s.length>0){const e=P(o,s.length);s.forEach((t=>{const o=t.rule.replace(t.bid,n),s=t.rule.paapi(t.bid,n),c=t.rule.options.delay;this.logger.logMessage(`Intercepted bid request (matching rule #${t.rule.no}), mocking response in ${c}ms. Request, response, PAAPI configs:`,t.bid,o,s),this.setTimeout((()=>{o&&r(o,t.bid),s.forEach((e=>i(e,t.bid,n))),e()}),c)})),n=S(n),t=n.bids=c}else this.setTimeout(o,0);return{bids:t,bidRequest:n}}});const J=[];let Q,V=!1;function X(e,t){let{fromSession:n=!1,config:r,hook:i,logger:o}=t;r.setConfig({debug:!0}),Q.updateConfig(e),Z(!0),L({hook:i}),W(e,{hook:i,logger:o}),V||(V=!0,o.logMessage("Debug overrides enabled"+(n?" from session":"")))}function Z(e){J.forEach((e=>{let[t,n]=e;t().getHooks({hook:n}).remove()})),e&&J.forEach((e=>{let[t,n]=e;t().before(n)}))}function ee(e,t){const n=function(){return Q.intercept(...arguments)};J.push([e,function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t(e,n,...i)}])}function te(e,t,n,r,i,o,s,c){const d=P(c.onCompletion,2);({bids:r,bidRequest:i}=t({bids:r,bidRequest:i,addBid:s(c.onBid),addPaapiConfig:s(((e,t)=>c.onPaapi({bidId:t.bidId,...e}))),done:d})),0===r.length?(c.onResponse?.({}),d()):e(n,r,i,o,s,{...c,onCompletion:d})}function ne(e){let{DEBUG_KEY:n,config:r,hook:i,createBid:o,logger:s}=e;Q=new q({logger:s});const c=function(e){let{createBid:n}=e;return function(e,r,i,o,s,c){let d,{onResponse:a,onError:u,onBid:l,onFledge:f}=c;const g=P((()=>a(...d)),o.length+1);function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d=t,g()}function p(e,r){l({adUnit:r.adUnitCode,bid:Object.assign(n(t,r),e)})}if((o=o.map((e=>r({bidRequest:e,addBid:p,addPaapiConfig(e,t,n){f({adUnitCode:t.adUnitCode,ortb2:n.ortb2,ortb2Imp:t.ortb2Imp,...e})},done:g}).bidRequest)).filter((e=>e.bids.length>0))).length>0){const t=new Set;o.forEach((e=>e.bids.forEach((e=>t.add(e.bidId))))),(i=S(i)).ad_units.forEach((e=>{e.bids=e.bids.filter((e=>t.has(e.bid_id)))})),i.ad_units=i.ad_units.filter((e=>e.bids.length>0)),e(i,o,s,{onResponse:b,onError:u,onBid:l})}else b(!0,[])}}({createBid:o});ee((()=>i.get("processBidderRequests")),te),ee((()=>i.get("processPBSRequest")),c),function(e){let t,{DEBUG_KEY:n,storage:r,config:i,hook:o,logger:s}=e;try{r=r||window.sessionStorage,t=JSON.parse(r.getItem(n))}catch(e){}t&&X(t,{fromSession:!0,config:i,hook:o,logger:s})}({DEBUG_KEY:n,config:r,hook:i,logger:s}),r.getConfig("debugging",(e=>{let{debugging:t}=e;return function(e){let t,{getStorage:n=(()=>window.sessionStorage),DEBUG_KEY:r,config:i,hook:o,logger:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e){try{t=n()}catch(e){s.logError("sessionStorage is not available: debugging configuration will not persist on page reload",e)}null!=t&&function(e){let{sessionStorage:t=window.sessionStorage,DEBUG_KEY:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.enabled){e.intercept&&((e=S(e)).intercept=Q.serializeConfig(e.intercept));try{t.setItem(n,JSON.stringify(e))}catch(e){}}else try{t.removeItem(n)}catch(e){}}(e,{sessionStorage:t,DEBUG_KEY:r}),e.enabled?X(e,{config:i,hook:o,logger:s}):function(e){let{hook:t,logger:n}=e;Q.updateConfig({}),Z(!1),L({hook:t}),V&&(V=!1,n.logMessage("Debug overrides disabled"))}({hook:o,logger:s})}}(t,{DEBUG_KEY:n,config:r,hook:i,logger:s})}),{init:!0})}window._pbjsGlobals.forEach((e=>{window[e]&&!0===window[e]._installDebugging&&(window[e]._installDebugging=ne)}))})();